{"uid":"cdfcd94bb0991836","name":"test_forceful_restart_without_data_and_transaction_logs","fullName":"tests.integration.ha_tests.test_self_healing#test_forceful_restart_without_data_and_transaction_logs","historyId":"1ab295315f12ae381caee21d2bb9082a","time":{"start":1715392876243,"stop":1715393041978,"duration":165735},"description":"A forceful restart with deleted data and without transaction logs (forced clone).","descriptionHtml":"<p>A forceful restart with deleted data and without transaction logs (forced clone).</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1715390839128,"stop":1715390839129,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1715390839129,"stop":1715390839411,"duration":282},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1715390839129,"stop":1715390839129,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1715392258801,"stop":1715392262980,"duration":4179},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1715392869713,"stop":1715392869713,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wal_settings","time":{"start":1715392869714,"stop":1715392876241,"duration":6527},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1715392869714,"stop":1715392869714,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"A forceful restart with deleted data and without transaction logs (forced clone).","status":"passed","steps":[],"attachments":[{"uid":"dfc4a7e6db1dd9ba","name":"log","source":"dfc4a7e6db1dd9ba.txt","type":"text/plain","size":509}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"wal_settings::finalizer","time":{"start":1715393041989,"stop":1715393048818,"duration":6829},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes::finalizer","time":{"start":1715393048823,"stop":1715393049863,"duration":1040},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1715393049865,"stop":1715393049865,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1715393506074,"stop":1715393640519,"duration":134445},"status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7bbf2e60eb30 state=finished raised ConnectTimeout>]\n","statusTrace":"  File \"/home/ubuntu/github-runner/_work/test-runners-self-hosted-postgresql-operator/test-runners-self-hosted-postgresql-operator/.tox/integration/lib/python3.10/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n  File \"/home/ubuntu/github-runner/_work/test-runners-self-hosted-postgresql-operator/test-runners-self-hosted-postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 302, in finalizer\n    event_loop.run_until_complete(async_finalizer())\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/ubuntu/github-runner/_work/test-runners-self-hosted-postgresql-operator/test-runners-self-hosted-postgresql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 294, in async_finalizer\n    await gen_obj.__anext__()\n  File \"/home/ubuntu/github-runner/_work/test-runners-self-hosted-postgresql-operator/test-runners-self-hosted-postgresql-operator/tests/integration/ha_tests/conftest.py\", line 58, in primary_start_timeout\n    await change_patroni_setting(\n  File \"/home/ubuntu/github-runner/_work/test-runners-self-hosted-postgresql-operator/test-runners-self-hosted-postgresql-operator/tests/integration/ha_tests/helpers.py\", line 130, in change_patroni_setting\n    for attempt in Retrying(stop=stop_after_delay(30 * 2), wait=wait_fixed(3)):\n  File \"/home/ubuntu/github-runner/_work/test-runners-self-hosted-postgresql-operator/test-runners-self-hosted-postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/ubuntu/github-runner/_work/test-runners-self-hosted-postgresql-operator/test-runners-self-hosted-postgresql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 326, in iter\n    raise retry_exc from fut.exception()\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1715393640534,"stop":1715393641470,"duration":936},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1715393641473,"stop":1715393641476,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1715393641476,"stop":1715393641476,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1715393641476,"stop":1715393641478,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"unstable"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"large-525-9e7c4d0c7b51cc19dd158f7a"},{"name":"thread","value":"10759-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":1,"broken":16,"skipped":0,"passed":11,"unknown":0,"total":28},"items":[{"uid":"d643a83fb5b192a5","reportUrl":"../37//#testresult/d643a83fb5b192a5","status":"passed","time":{"start":1715307072521,"stop":1715307237664,"duration":165143}},{"uid":"7d4682127462325f","reportUrl":"../36//#testresult/7d4682127462325f","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1715222103228,"stop":1715222182284,"duration":79056}},{"uid":"404ca1c27caa55a2","reportUrl":"../35//#testresult/404ca1c27caa55a2","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1715134007077,"stop":1715134086593,"duration":79516}},{"uid":"87686512ff5178ad","reportUrl":"../34//#testresult/87686512ff5178ad","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7dbe0511b700 state=finished raised RetryError>]","time":{"start":1715049026271,"stop":1715049026271,"duration":0}},{"uid":"a8665e63a43158b9","reportUrl":"../31//#testresult/a8665e63a43158b9","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1714962423950,"stop":1714962436818,"duration":12868}},{"uid":"bdddc0d989cf2a69","reportUrl":"../30//#testresult/bdddc0d989cf2a69","status":"passed","time":{"start":1714874440576,"stop":1714874613494,"duration":172918}},{"uid":"8fc9fbee6987ad11","reportUrl":"../29//#testresult/8fc9fbee6987ad11","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1714788246433,"stop":1714788325604,"duration":79171}},{"uid":"2cc9f3ebb453653c","reportUrl":"../27//#testresult/2cc9f3ebb453653c","status":"passed","time":{"start":1714701539489,"stop":1714701646102,"duration":106613}},{"uid":"13e30597ac3c05d","reportUrl":"../26//#testresult/13e30597ac3c05d","status":"passed","time":{"start":1714615470631,"stop":1714615627684,"duration":157053}},{"uid":"ec2f507f8ed21cbc","reportUrl":"../25//#testresult/ec2f507f8ed21cbc","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1714528897903,"stop":1714528979498,"duration":81595}},{"uid":"99ca7bc46c0ac331","reportUrl":"../24//#testresult/99ca7bc46c0ac331","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1714442441601,"stop":1714442520272,"duration":78671}},{"uid":"6b81185d7e1a87d2","reportUrl":"../23//#testresult/6b81185d7e1a87d2","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1714356038131,"stop":1714356118378,"duration":80247}},{"uid":"479f3040010fedad","reportUrl":"../22//#testresult/479f3040010fedad","status":"passed","time":{"start":1714270010671,"stop":1714270181617,"duration":170946}},{"uid":"990500fcc24881c5","reportUrl":"../20//#testresult/990500fcc24881c5","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7c555be0a770 state=finished raised RetryError>]","time":{"start":1714185258454,"stop":1714185258454,"duration":0}},{"uid":"f4bb6e2b7081ca49","reportUrl":"../19//#testresult/f4bb6e2b7081ca49","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1714098866527,"stop":1714098946469,"duration":79942}},{"uid":"deb83f82fca16583","reportUrl":"../18//#testresult/deb83f82fca16583","status":"broken","statusDetails":"tenacity.RetryError: RetryError[<Future at 0x7b92b9000c10 state=finished raised AssertionError>]","time":{"start":1714012017891,"stop":1714012087476,"duration":69585}},{"uid":"71c65a80aecf71de","reportUrl":"../17//#testresult/71c65a80aecf71de","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1713925505520,"stop":1713925583750,"duration":78230}},{"uid":"42112ef7d433df9f","reportUrl":"../16//#testresult/42112ef7d433df9f","status":"passed","time":{"start":1713837613186,"stop":1713837793619,"duration":180433}},{"uid":"e8a0d422c8ea002a","reportUrl":"../15//#testresult/e8a0d422c8ea002a","status":"broken","statusDetails":"Exception: ('Expected command %s to succeed instead it failed: %s', 'ls -1 /var/snap/charmed-postgresql/common/var/lib/postgresql/pg_wal/', 1)","time":{"start":1713751309923,"stop":1713751390276,"duration":80353}},{"uid":"e18faa2c2eab7954","reportUrl":"../11//#testresult/e18faa2c2eab7954","status":"passed","time":{"start":1713492087127,"stop":1713492260669,"duration":173542}}]},"tags":["unstable","asyncio","group(1)"]},"source":"cdfcd94bb0991836.json","parameterValues":[]}